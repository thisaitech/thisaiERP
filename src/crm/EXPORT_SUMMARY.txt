# CRM Module Export Summary
# Construction CRM Package for ERP Integration
# Generated: $(date)

## FOLDER STRUCTURE
src/crm/
├── README.md                           # Module documentation
├── config.ts                           # Module configuration
├── constants/
│   └── index.ts                        # All constants and enums
├── contexts/
│   └── CRMContext.tsx                  # React context for state management
├── pages/
│   ├── CRMPage.tsx                     # Main CRM router component
│   ├── CRMLeadDetail.tsx               # Lead detail page with tabs
│   └── CRMSettings.tsx                 # CRM settings page
├── components/
│   ├── CRMDashboard.tsx                # Dashboard with metrics
│   ├── CRMLeadsList.tsx                # Leads list with filters
│   └── CRMPipelineBoard.tsx            # Kanban pipeline board
├── services/
│   └── crmService.ts                   # Firebase CRUD operations
├── types/
│   └── index.ts                        # TypeScript interfaces
└── EXPORT_SUMMARY.txt                  # This file

## HOW TO COPY INTO ANOTHER ERP

### Step 1: Copy Files
cp -r src/crm /path/to/your-erp/src/

### Step 2: Install Dependencies
npm install @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities date-fns framer-motion jspdf jspdf-autotable

### Step 3: Update Firebase Collections
# Add to src/services/firebase.ts COLLECTIONS object:
CRM_LEADS: 'crm_leads',
CRM_ACTIVITIES: 'crm_activities',
CRM_SITE_VISITS: 'crm_site_visits',
CRM_REQUIREMENTS: 'crm_requirements',
CRM_DRAWINGS: 'crm_drawings',
CRM_QUOTATIONS: 'crm_quotations',
CRM_ATTACHMENTS: 'crm_attachments',
CRM_AUDIT_LOGS: 'crm_audit_logs',
CRM_SETTINGS: 'crm_settings'

### Step 4: Add Routes
# In App.tsx or routes file:
import CRMPage from './crm/pages/CRMPage';
<Route path="/crm/*" element={<CRMPage />} />

### Step 5: Add Navigation
# In Layout.tsx navigationItems array:
{ path: '/crm', label: 'CRM', icon: Buildings, allowedRoles: ['admin', 'manager', 'sales'], pageKey: 'crm' }

### Step 6: Configure Module
# Create src/crm/config.local.ts with your ERP-specific settings
import { configureCRM } from './config';
configureCRM({
  basePath: '/crm',
  integrations: {
    projects: {
      enabled: true,
      createProjectFromLead: yourProjectCreationFunction
    },
    auth: {
      getCurrentUser: yourUserFunction,
      checkPermission: yourPermissionFunction
    }
  }
});

### Step 7: Database Setup
# Firebase: Collections auto-created
# SQL: Run the migration scripts in CRM_PACKAGE.md

## MINIMAL STEPS TO RUN

1. Copy crm folder: cp -r src/crm /your-erp/src/
2. Install deps: npm install @dnd-kit/core @dnd-kit/sortable date-fns framer-motion
3. Update firebase.ts: Add CRM_ collections
4. Add route: <Route path="/crm/*" element={<CRMPage />} />
5. Add nav menu item for CRM
6. Start app: npm run dev
7. Visit: http://localhost:3000/crm

## INTEGRATION POINTS

### Navigation
- Add CRM menu item with Buildings icon
- Permissions: admin, manager, sales, engineer roles

### Permissions
- Extend existing permission system with CRM permissions
- crm.leads.view, crm.leads.create, crm.leads.edit, etc.

### Projects Integration
- Implement createProjectFromLead function
- Map lead fields to project fields
- Return projectId and URL

### File Storage
- Supports Firebase Storage (default)
- Configurable for S3 or local storage
- Environment variables for storage config

### User Management
- Integrates with existing auth system
- Uses uid, role, and permissions
- Supports multi-tenant with companyId

## CONFIGURATION OPTIONS

### Environment Variables
CRM_BASE_PATH=/crm
CRM_STORAGE_DRIVER=firebase
CRM_PROJECT_INTEGRATION=enabled

### Module Configuration
configureCRM({
  basePath: '/crm',
  storage: { driver: 'firebase' },
  integrations: { projects: { enabled: true } },
  features: { leadQualification: true }
});

## DATABASE SCHEMA

### Tables Required
- crm_leads (main leads table)
- crm_activities (timeline)
- crm_site_visits (visits)
- crm_requirements (specs)
- crm_drawings (plans)
- crm_quotations (quotes)
- crm_attachments (files)
- crm_audit_logs (history)
- crm_settings (config)

### Indexes Needed
- crm_leads: stage, status, assigned_sales_id, company_id
- crm_activities: lead_id, created_at
- All tables: created_at, updated_at

## FEATURES INCLUDED

✅ Lead Management Pipeline
✅ Site Visit Scheduling
✅ Requirements Collection
✅ Drawing Management
✅ Quotation Generation
✅ Activity Timeline
✅ File Attachments
✅ Audit Logs
✅ Role Permissions
✅ Project Integration
✅ Mobile Responsive
✅ Drag & Drop Pipeline
✅ PDF Export
✅ Real-time Updates

## DEPENDENCIES REQUIRED

"@dnd-kit/core": "^6.0.8",
"@dnd-kit/sortable": "^7.0.2",
"@dnd-kit/utilities": "^3.2.1",
"date-fns": "^4.1.0",
"framer-motion": "^11.0.3",
"jspdf": "^3.0.4",
"jspdf-autotable": "^5.0.2"

## TOTAL FILES: 10
## TOTAL LINES: ~2500
## ESTIMATED INTEGRATION TIME: 4-8 hours

## SUPPORT
- Check CRM_PACKAGE.md for detailed instructions
- All components are self-contained
- Firebase backend (adaptable to other backends)
- TypeScript with full type safety

